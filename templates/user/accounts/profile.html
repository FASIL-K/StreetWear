{% extends 'user/home/base.html' %}
{% block title %}Profile{% endblock title %}
{% block body %}
{% load static %}


<style>
  .wallet-card {
    border: none;
    border-radius: 10px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    background-color: #fff;
    overflow: hidden;
    width: 300px;
    margin: 0 auto;
    float: right;
    margin-top: -109px;
}

.card-header {
    background-color: #007bff;
    color: #fff;
    padding: 10px;
    text-align: center;
}

.card-header h3 {
    margin: 0;
    font-size: 20px;
}

.card-body {
    padding: 20px;
}

.wallet-info {
    text-align: center;
}

.wallet-balance {
    font-size: 24px;
    font-weight: bold;
    color: #007bff;
}
</style>

<main class="main" style="font-size: 16px;">
    <div class="page-header text-center" >
        <div class="container">
            <h1 class="page-title">My Account<span>Profile</span></h1>
            {% include 'includes/alert.html' %}
        </div><!-- End .container -->
    </div><!-- End .page-header -->
    <nav aria-label="breadcrumb" class="breadcrumb-nav mb-3">
        <div class="container">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
                <li class="breadcrumb-item"><a href="{% url 'shop' %}">Shop</a></li>
                <li class="breadcrumb-item active" aria-current="page">My Account</li>
            </ol>
        </div><!-- End .container -->
    </nav><!-- End .breadcrumb-nav -->

    <div class="page-content">
        <div class="dashboard">
            <div class="container">
                <div class="row">
                    <aside class="col-md-4 col-lg-3">
                        <ul class="nav nav-dashboard flex-column mb-3 mb-md-0" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" id="tab-dashboard-link" data-toggle="tab" href="#tab-dashboard" role="tab" aria-controls="tab-dashboard" aria-selected="true">Dashboard</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="tab-orders-link"  href="{% url 'orders' %}" >Orders</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="tab-downloads-link" data-toggle="tab" href="#tab-downloads" role="tab" aria-controls="tab-downloads" aria-selected="false">Wallet</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="tab-address-link" data-toggle="tab" href="#tab-address" role="tab" aria-controls="tab-address" aria-selected="false">Adresses</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="tab-account-link" data-toggle="tab" href="#tab-account" role="tab" aria-controls="tab-account" aria-selected="false">Account Details</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="{% url 'signout' %}">Sign Out</a>
                            </li>
                        </ul>
                    </aside><!-- End .col-lg-3 -->

                    <div class="col-md-8 col-lg-9">
                        <div class="tab-content">
                            <div class="tab-pane fade show active" id="tab-dashboard" role="tabpanel" aria-labelledby="tab-dashboard-link">
                                {% if user1 %}
                                <h5> HELLO </h5>
                                <h5 style="text-transform: uppercase;"> {{ user1.username }}
                                </h5>

                                {% endif %}                      
                                 <br> 
                                <div class="wallet-card">
                                  <div class="card-header">
                                      <h3>Welcome, {{ user.username }}!</h3>
                                  </div>
                                  <div class="card-body">
                                      <div class="wallet-info">
                                       
  
                                          <p>Your Wallet Balance:</p>
                                          <p class="wallet-balance">₹{{ wallet.wallet }}</p>
                                          {% if wallets %}
                                          {% for wallet in wallets %}
                                          Available Balance:₹  <p class="wallet-balance">₹{{ wallet.wallet }}</p>
                                          {% endfor %}
                                          {% else %}
                                          Available Balance:₹ 0.00
                                          {% endif %}
                                      </div>
                                  </div>
                              </div>
                                From your account dashboard you can view your <a href="#tab-orders" class="tab-trigger-link link-underline">recent orders</a>, manage your <a href="#tab-address" class="tab-trigger-link">shipping and billing addresses</a>, and <a href="#tab-account" class="tab-trigger-link">edit your password and account details</a>.</p>
                            </div><!-- .End .tab-pane -->

                            <div class="tab-pane fade" id="tab-orders" role="tabpanel" aria-labelledby="tab-orders-link">
                                <p>No order has been made yet.</p>
                                <a href="{% url 'shop' %}" class="btn btn-outline-primary-2"><span>GO SHOP</span><i class="icon-long-arrow-right"></i></a>
                            </div><!-- .End .tab-pane -->

                            <div class="tab-pane fade" id="tab-downloads" role="tabpanel" aria-labelledby="tab-downloads-link">
                              <div class="wallet-card" style="float: left; margin-top: -54px;">
                                <div class="card-header">
                                    <h3>Welcome, {{ user.username }}!</h3>
                                </div>
                                <div class="card-body">
                                    <div class="wallet-info">
                                     

                                        <p>Your Wallet Balance:</p>
                                        <p class="wallet-balance">₹{{ wallet.wallet }}</p>
                                        {% if wallets %}
                                        {% for wallet in wallets %}
                                        Available Balance:₹  <p class="wallet-balance">₹{{ wallet.wallet }}</p>
                                        {% endfor %}
                                        {% else %}
                                        Available Balance:₹ 0.00
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            </div><!-- .End .tab-pane -->

                            <div class="tab-pane fade" id="tab-address" role="tabpanel"
                            aria-labelledby="tab-address-link">
                            <p>The following addresses will be used on the checkout page by default.</p>
                                    {% comment %} <button type="button" class="btn btn-outline-primary-2" data-bs-toggle="modal" data-bs-target="#exampleModal">
                                      Add New Adress
                                    </button> {% endcomment %}
                                    <button type="button" style="font-size: 16px;" class="btn btn-outline-dark" data-bs-toggle="modal" data-bs-target="#exampleModal">
                                        Add New Address
                                      </button>          
                               <!-- Modal -->
                               <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                  <div class="modal-content">
                                    <div class="modal-header">
                                      <h4 class="modal-title fs-5" id="exampleModalLabel">Add Address</h4>
                                      <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="Close">
                                        <i class="fa fa-times"></i>
                                      </button>
                                    </div>
                                    <div class="modal-body " style="margin-left: 18px;">
                                      <form action="{% url 'addaddress' %}" enctype="multipart/form-data" method="POST">
                                        {% csrf_token %}
                                        <div class="row mb-1">
                                            <div class="col-lg-6">
                                                <div class="checkout__input">
                                                <p>First Name<span>*</span></p>
                                                <input type="text" name="firstname" class="form-control">
                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="checkout__input">
                                                <p>Last Name<span>*</span></p>
                                                <input type="text" name="lastname" class="form-control">
                                                </div>
                                            </div>
                                            </div>
                        
                                            <div class="checkout__input mb-1">
                                                <p>Country<span>*</span></p>
                                                <input type="text" name="country" class="form-control">
                                                </div>
                                                <div class="checkout__input mb-1">
                                                <p>Address<span>*</span></p>
                                                <input type="text" class="checkout__input__add form-control" name="address">
                                                </div>
                                                <div class="checkout__input mb-1">
                                                <p>Town/City<span>*</span></p>
                                                <input type="text" name="city" class="form-control">
                                                </div>
                                                <div class="checkout__input mb-1">
                                                <p>State<span>*</span></p>
                                                <input type="text" name="state" class="form-control">
                                                </div>
                                                <div class="checkout__input mb-1">
                                                <p>Postcode / ZIP<span>*</span></p>
                                                <input type="text" name="pincode" class="form-control">
                                                </div>
                                                <div class="row mb-1">
                                                <div class="col-lg-6">
                                                    <div class="checkout__input">
                                                    <p>Phone<span>*</span></p>
                                                    <input type="text" name="phone" class="form-control">
                                                    </div>
                                                </div>
                                                <div class="col-lg-6">
                                                    <div class="checkout__input">
                                                    <p>Email<span>*</span></p>
                                                    <input type="text" name="email" class="form-control">
                                                    </div>
                                                </div>
                                                </div>
                                                <div class="checkout__input mb-1">
                                                <p>Order notes<span>*</span></p>
                                                <input type="text" placeholder="Notes about your order, e.g. special notes for delivery." name="ordernote" class="form-control">
                                                </div>
                                        <div class="d-flex justify-content-center">
                                          <button type="submit"
                                            class="btn btn-success btn-lg gradient-custom-4 w-50 text-light" style="margin-bottom: 23px;">Save Changes</button>
                                        </div>
                                      </form>
                                </div>
                              </div>
                            </div>
                          </div>

                                    
                            {% if address %}
                            <div class="row">
                                {% for i in address %}
                                <div class="col-lg-6">
                                    <div class="card card-dashboard">
                                        <div class="card-body">
                                            <tr class="summary-shipping-row">
                                                <td>
                                                    <div class="d">
                                                        <div class="custom-control custom-radio">
                                                            <input type="radio" id="free-shipping"
                                                                name="shipping" class="custom-control-input">
                                                            
                                                        </div><!-- End .custom-control -->
                                                        <div class="tab-pane fade" id="tab-delete{{forloop.counter}}"
                                                            role="tabpanel" aria-labelledby="tab-delete-link">
                                                            <p>Are you sure delete this address.</p>
                                                            <a href=""
                                                                class="btn btn-outline-primary-2"><span>Confirm</span><i
                                                                    class="icon-long-arrow-right"></i></a>
                                                        </div><!-- .End .tab-pane -->
                                                    </div>
                                                </tr>
                                            </tr><!-- End .summary-shipping-row -->
                                            <h2 class="card-title" style="text-align: center;">ADDRESS</h2>
                                            <!-- End .card-title -->
                                            <table>
                                                <tr>
                                                    <td><strong>First Name</strong></td>
                                                    <td>:{{i.first_name}}</td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Last Name</strong></td>
                                                    <td>:{{i.last_name}}</td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Phone Number</strong></td>
                                                    <td>:{{i.phone}}</td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Email</strong></td>
                                                    <td>:{{i.email}}</td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Address</strong></td>
                                                    <td>:{{i.address}}</td>
                                                </tr>
                                            </table>
                                            <br>
                                            <div class="addressmgt" style="display: flex; align-items:center ; justify-content: space-between; ">
                                                <button type="button" class="site-btn mb-3 btn btn-primary " data-bs-toggle="modal" data-bs-target="#editaddress" style="    min-width: 85px;">
                                                    Edit
                                               
                                                </button>
                                                <button type="button" class="site-btn mb-3 btn btn-primary " data-bs-toggle="modal" data-bs-target="#viewaddress" style="    min-width: 85px;">
                                                    View
                                               
                                                </button>
                                                <a  class="site-btn mb-3 btn btn-primary" style="color: white;" data-bs-toggle="modal" data-bs-target="#deletaddress">
                                                    delete
                                                  </a>
                                      
                                            </div>
                                            <!--Delete Modal -->
                                                <div class="modal fade" id="deletaddress" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                    <div class="modal-dialog">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                        <h5 class="" id="exampleModalLabel">Delete</h5>
                                                        <button type="button" class="btn" data-bs-dismiss="modal" aria-label="Close"> <i class="fa fa-times" ></i></button>
                                                        </div>
                                                        <div class="modal-body" style="margin-left: 25px;">
                                                        <p>Are you sure to delete Address <span class="text-primary">" {{i.first_name}} {{i.last_name}} ..."</span></p>
                                                        <form action="{%url 'deleteaddress' i.id%}" enctype="multipart/form-data" method="POST">
                                                            {% csrf_token %}
                                                            <div class="d-flex justify-content-center" style="    margin-bottom: 10px;">
                                                            <button type="submit"
                                                                class="btn btn-danger btn-lg gradient-custom-4 w-50 text-light">Confirm</button>
                                                            </div>
                                            
                                                        </form>
                                                        </div>
                                                    </div>
                                                    </div>
                                                </div>




                                            <div class="modal fade" id="viewaddress" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                                                <div class="modal-dialog">
                                                  <div class="modal-content">
                                                    <div class="modal-header">
                                                      <h4 class="modal-title fs-6" id="staticBackdropLabel">View address</h4>
                                                      <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="Close">
                                                        <i class="fa fa-times"></i>
                                                      </button>
                                                    </div>
                                                    <div class="modal-body" style="margin-left: 25px;">
                            
                                                      <div class="row">
                                                        <div class="col-sm-5">
                                                          <p class="mb-0">Full Name</p>
                                                        </div>
                                                        <div class="col-sm-7">
                                                            {{ i.first_name}} {{ i.last_name}}
                                                        </div>
                                                      </div>
                                                      <hr>
                            
                                                      <div class="row">
                                                        <div class="col-sm-5">
                                                          <p class="mb-0">Address</p>
                                                        </div>
                                                        <div class="col-sm-7">
                                                            {{ i.address}}
                                                        </div>
                                                      </div>
                                                      <hr>
                            
                                                      <div class="row">
                                                        <div class="col-sm-5">
                                                          <p class="mb-0">Contact Number</p>
                                                        </div>
                                                        <div class="col-sm-7">
                                                            {{ i.phone}}
                                                        </div>
                                                      </div>
                                                      <hr>
                            
                                                      <div class="row">
                                                        <div class="col-sm-5">
                                                          <p class="mb-0">Email</p>
                                                        </div>
                                                        <div class="col-sm-7">
                                                            {{ i.email}}
                                                        </div>
                                                      </div>
                                                      <hr>
                            
                                                      <div class="row">
                                                        <div class="col-sm-5">
                                                          <p class="mb-0">City</p>
                                                        </div>
                                                        <div class="col-sm-7">
                                                            {{ i.city}}
                                                        </div>
                                                      </div>
                                                      <hr>
                            
                                                      <div class="row">
                                                        <div class="col-sm-5">
                                                          <p class="mb-0">Pincode</p>
                                                        </div>
                                                        <div class="col-sm-7">
                                                            {{ i.pincode}}
                                                        </div>
                                                      </div>
                                                      <hr>
                            
                                                      <div class="row">
                                                        <div class="col-sm-5">
                                                          <p class="mb-0">State</p>
                                                        </div>
                                                        <div class="col-sm-7">
                                                            {{ i.state}}
                                                        </div>
                                                      </div>
                                                      <hr>
                            
                                                      <div class="row">
                                                        <div class="col-sm-5">
                                                          <p class="mb-0">Country</p>
                                                        </div>
                                                        <div class="col-sm-7">
                                                            {{ i.country}}
                                                        </div>
                                                      </div>
                            
                            
                                                    </div>
                                                    <div class="modal-footer">
                                                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                                    </div>
                                                  </div>
                                                </div>
                                              </div>
                                        </div><!-- End .card-body -->

                                    </div><!-- End .card-dashboard -->
                                </div><!-- End .col-lg-6 -->


                                {% endfor %}
                                {% else %}
                                {% endif %}

                            </div><!-- End .row -->
                        </div><!-- .End .tab-pane -->

                            <div class="tab-pane fade" id="tab-account" role="tabpanel" aria-labelledby="tab-account-link">
                                <div class="col-lg-6">
                                    <div class="card card-dashboard">
                                        <div class="card-body">
                                            <h2 class="card-title" style="text-align: center;">PROFILE</h2>
                                            <!-- End .card-title -->
                                            <table>
                                                <tr>
                                                    <td><strong>First Name</strong></td>
                                                    <td>:{{user1.first_name}}</td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Last Name</strong></td>
                                                    <td>:{{user1.last_name}}</td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Phone Number</strong></td>
                                                    <td>:{{user1.phone_number}}</td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Email</strong></td>
                                                    <td>:{{user1.email}}</td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Password</strong></td>
                                                    <td>:********</td>
                                                </tr>
                                            </table>

                                            <button type="button" class="site-btn mb-3 btn btn-primary " data-bs-toggle="modal" data-bs-target="#editprofile">
                                                Edit
                                           
                                            </button>
                                            <button type="button" class="site-btn mb-3 btn btn-primary " data-bs-toggle="modal" data-bs-target="#changepassword">
                                                Change Password
                                           
                                            </button>

                                            
                                            <div class="modal fade" id="changepassword" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                <div class="modal-dialog">
                                                  <div class="modal-content">
                                                    <div class="modal-header">
                                                      <h4 class="modal-title fs-5" id="exampleModalLabel">Edit profile</h4>
                                                      <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="Close">
                                                        <i class="fa fa-times"></i>
                                                      </button>
                                                    </div>
                                                    <div class="modal-body " style="margin-left: 18px;">
                                                      <form action="{%url 'changepassword'%} " enctype="multipart/form-data" method="POST">
                                                        {% csrf_token %}
                                                        <div class="form-outline mb-4">
                                                            <label class="form-label" for="form3Example3cg">Old Password</label>
                                                          <input value=""  name='old_password'  type="text" id="id_usernam" class="form-control form-control-lg" />
                                                        </div>  
                                                        <div class="form-outline mb-4">
                                                            <label class="form-label" for="form3Example3cg">New Password</label>
                                                          <input value=""  name='new_password'  type="text" id="id_firstname" class="form-control form-control-lg" />
                                                        </div>  
                                        
                                                        <div class="form-outline mb-4">
                                                            <label class="form-label" for="form3Example3cg">Confirm New Password</label>
                                                          <input value=""  name='confirm_new_password'  type="password" id="id_lasname" class="form-control form-control-lg" />
                                                        </div> 
                                                        <div class="d-flex justify-content-center">
                                                          <button type="submit"
                                                            class="btn btn-success btn-lg gradient-custom-4 w-50 text-light" style="margin-bottom: 23px;">Save Changes</button>
                                                        </div>
                                                      </form>
                                                </div>
                                              </div>
                                            </div>
                                          </div>






                                            <div class="modal fade" id="editprofile" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                <div class="modal-dialog">
                                                  <div class="modal-content">
                                                    <div class="modal-header">
                                                      <h4 class="modal-title fs-5" id="exampleModalLabel">Edit profile</h4>
                                                      <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="Close">
                                                        <i class="fa fa-times"></i>
                                                      </button>
                                                    </div>
                                                    <div class="modal-body " style="margin-left: 18px;">
                                                      <form action="{%url 'editprofiles'%}" enctype="multipart/form-data" method="POST">
                                                        {% csrf_token %}
                                                        <div class="form-outline mb-4">
                                                            <label class="form-label" for="form3Example3cg">Username</label>
                                                          <input value="{{user.username}}"  name='username'  type="text" id="id_usernam" class="form-control form-control-lg" />
                                                        </div>  
                                                        <div class="form-outline mb-4">
                                                            <label class="form-label" for="form3Example3cg">First Name</label>
                                                          <input value="{{user.first_name}}"  name='first_name'  type="text" id="id_firstname" class="form-control form-control-lg" />
                                                        </div>  
                                        
                                                        <div class="form-outline mb-4">
                                                            <label class="form-label" for="form3Example3cg">Last Name</label>
                                                          <input value="{{user.last_name}}"  name='last_name'  type="text" id="id_lasname" class="form-control form-control-lg" />
                                                        </div>  
                                        
                                                        <div class="form-outline mb-4">
                                                            <label class="form-label" for="form3Example3cg">Email</label>
                                                          <input readonly  name='email' value="{{user.email}}" type="email" id="form3Example3cg" class="form-control form-control-lg" />
                                                        </div>
                                                        <div class="d-flex justify-content-center">
                                                          <button type="submit"
                                                            class="btn btn-success btn-lg gradient-custom-4 w-50 text-light" style="margin-bottom: 23px;">Save Changes</button>
                                                        </div>
                                                      </form>
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                        </div><!-- End .card-body -->
                                    </div><!-- End .card-dashboard -->
                                </div><!-- End .col-lg-6 -->
                            </div><!-- .End .tab-pane -->
                        </div>
                        
                    </div><!-- End .col-lg-9 -->
                </div><!-- End .row -->
            </div><!-- End .container -->
        </div><!-- End .dashboard -->
    </div><!-- End .page-content -->

 
</main><!-- End .main -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>

{% endblock  %}
